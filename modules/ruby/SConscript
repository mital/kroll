#!/usr/bin/env ruby
Import('build')

Env = build.env.Clone()
Env.Append(LIBS=['kroll'])
Env.Append(CPPDEFINES={'KROLL_RUBY_API_EXPORT': 1})

if build.is_osx():
	Env.Append(CPPPATH=['/System/Library/Frameworks/Ruby.framework/Versions/Current/Headers',build.kroll_include_dir])
	Env.Append(FRAMEWORKS=['Ruby'])
elif build.is_linux():
	Env.Append(CPPPATH=['/usr/lib/ruby/1.8/i386-linux', '/usr/lib/ruby/1.8/i486-linux',build.kroll_include_dir])
	Env.Append(LIBS=['ruby1.8'])
elif build.is_win32():
	Env.Append(CPPPATH=['C:\\Ruby\\lib\\ruby\\1.8\\i386-mswin32',build.kroll_include_dir])
	Env.Append(LIBPATH=['C:\\Ruby\\lib'])
	Env.Append(LIBS=['msvcrt-ruby18'])

Env.SharedLibrary(build.dir + '/rubymodule', Glob('*.cpp'), )
